# Emoji 幸存者

欢迎来到 Emoji 幸存者，这是一款模仿 Vampire Survivors 玩法，由 AI 协助生成的街机风格生存游戏。

## 游戏玩法

*   **控制:** 使用 `W`, `A`, `S`, `D` 键移动你的忍者角色 🥷。
*   **目标:** 在不断涌来的敌人攻击下尽可能长时间地生存下去。
*   **升级:** 消灭敌人会掉落经验宝石 💎。收集宝石以提升等级。
*   **强化:** 每次升级时，你可以从随机出现的选项中选择一项强化，包括获得新武器、新被动道具，或升级现有物品。
*   **胜利条件:** 游戏目前没有明确的胜利条件，目标是尽可能生存更长时间，击败更多的敌人和 Boss。
*   **失败条件:** 当你的生命值降至 0 时，游戏结束。
*   **暂停:** 按 `P` 键可以暂停或恢复游戏。

## 游戏机制

### 玩家

*   **基础属性:** 玩家拥有生命值 (Health)、移动速度 (Speed)、护甲 (Armor)、生命恢复 (Regen)、拾取范围 (Pickup Radius) 等基础属性。
*   **战斗属性:** 还包括伤害倍率 (Damage Multiplier)、投射物速度倍率 (Projectile Speed Multiplier)、冷却缩减倍率 (Cooldown Multiplier)、范围倍率 (Area Multiplier)、效果持续时间倍率 (Duration Multiplier)、额外投射物数量 (Projectile Count Bonus) 等影响武器和技能效果的属性。
*   **获取属性:** 基础属性定义在 `js/core/config.js` 的 `PLAYER_DEFAULT_STATS`。玩家的最终属性由基础属性、被动道具加成和等级共同决定，通过 `Player.getStat(statName)` 方法计算。
*   **武器:** 玩家最多可以同时拥有 6 件武器 (可在 `config.js` 中修改 `maxWeapons`)。武器会自动攻击。
*   **被动道具:** 玩家最多可以同时拥有 6 件被动道具 (可在 `config.js` 中修改 `maxPassives`)。被动道具提供各种属性加成或特殊效果。
*   **升级:** 收集经验宝石提升等级，等级越高，升级所需经验越多 (经验曲线在 `config.js` 的 `LEVEL_XP_REQUIREMENTS` 中定义)。
*   **进化:** 当特定武器达到满级 (8级)，并且玩家拥有指定的被动道具时，武器可能会进化成更强大的形态。进化逻辑在 `js/game.js` 的 `checkEvolution` 函数中处理。

### 武器 (Weapons)

*   **获取:** 初始自带匕首，其他通过升级获得。武器会自动根据冷却时间攻击。
*   **定义:** 基础武器在 `js/weapons/basicWeapons.js`，高级和进化武器在 `js/weapons/advancedWeapons.js`。

**基础武器:**

1.  **匕首 (🔪 DaggerWeapon):**
    *   **效果:** 向最近的敌人发射匕首。
    *   **升级:** 提升伤害、投射物速度、数量、穿透次数，减少冷却时间。
    *   **进化:** (暂无)

2.  **鞭子 (〰️ WhipWeapon):**
    *   **效果:** 向角色前方和后方（取决于等级）进行水平抽击。
    *   **升级:** 提升伤害、范围（长度和宽度）、鞭挞次数，减少冷却时间。
    *   **进化:** **血腥泪滴 (🩸 BloodyTear)** (需要满级 `空虚之心 ❤️`)
        *   **效果:** 鞭挞可以造成暴击并吸取生命值。伤害、范围等属性进一步提升。

3.  **痛苦力场 (🧄 GarlicWeapon / King Bible):** (*注：名字沿用旧称，效果类似 King Bible*)
    *   **效果:** 在角色周围形成一个持续旋转的力场（类似圣经），对接触的敌人造成伤害并可能击退。
    *   **升级:** 提升伤害、范围（力场半径）、力场数量、持续时间，减少冷却时间。 (*实际代码中可能叫 Garlic，但效果更像 King Bible*)
    *   **进化:** **不洁祷言 (Unholy Vespers)** (需要满级 `咒语生成器 📜`)
        *   **效果:** 力场永不消失，持续旋转。伤害、范围、旋转速度等提升。

**高级武器:**

4.  **燃烧之刃 (🔥 FireBladeWeapon):**
    *   **效果:** 发射火焰投射物，击中敌人时附加燃烧效果（持续伤害）。
    *   **升级:** 提升基础伤害、燃烧伤害、燃烧持续时间、投射物速度、数量、穿透次数，减少冷却时间。
    *   **进化:** (暂无)

5.  **岚刃 (🌀 StormBladeWeapon):**
    *   **效果:** 发射能反弹的电能刀刃。
    *   **升级:** 提升伤害、反弹次数、投射物速度、数量，减少冷却时间。
    *   **进化:** **雷霆之环 (⚡ ThunderLoop)** (需要满级 `复制器 💍`)
        *   **效果:** 刀刃在击中或反弹时产生电击爆炸，造成范围伤害。刀刃数量、伤害、反弹次数等提升。

6.  **握手礼炮 (🤝 HandshakeWeapon):** (*名字待定，效果类似 Cherry Bomb*)
    *   **效果:** 向随机方向投掷炸弹，落地后爆炸造成范围伤害。
    *   **升级:** 提升伤害、爆炸范围、数量，减少冷却时间。
    *   **进化:** (暂无)

### 被动道具 (Passive Items)

*   **获取:** 通过升级获得。提供属性加成或特殊效果。
*   **定义:** 在 `js/items/passiveItems.js` 中定义。

**主要被动道具:**

1.  **菠菜 (🥬 Spinach):** 提升所有造成的伤害。 (MaxLv 5, 每级 +10%)
2.  **盔甲 (🛡️ Armor):** 提供固定数值的护甲，减免受到的伤害。 (MaxLv 5, 每级 +1)
3.  **翅膀 (🕊️ Wings):** 提升移动速度。 (MaxLv 5, 每级 +10%)
4.  **空白之书 (📖 EmptyTome):** 减少所有武器的冷却时间。 (MaxLv 5, 每级 -8%)
5.  **烛台 (🕯️ Candelabrador):** 增大所有武器的效果范围 (对光环、爆炸、鞭子长度等有效)。 (MaxLv 5, 每级 +10%)
6.  **护腕 (🥊 Bracer):** 提升所有投射物的飞行速度。 (MaxLv 5, 每级 +10%)
7.  **空虚之心 (❤️ HollowHeart):** 提升最大生命值上限。 (MaxLv 5, 每级 +10%) - **鞭子进化需求**
8.  **番茄 (🍅 Pummarola):** 提供持续的生命恢复效果。 (MaxLv 5, 每级 +0.2/秒)
9.  **吸铁石 (🧲 Magnet):** 增大拾取经验宝石和掉落物的范围，并周期性 (15秒) 地将屏幕内所有经验宝石吸向玩家。 (MaxLv 5, 每级 +25% 范围)

*(注：部分道具可能在代码中有不同名称或Emoji，以上为整理后的效果描述。部分进化所需的被动道具如 咒语生成器、复制器 尚未在游戏中实装)*

### 怪物 (Enemies)

*   **生成:** 从屏幕外生成，随时间增多增强 (`enemyManager` in `game.js`)。
*   **类型 (`ENEMY_TYPES` in `constants.js`):**
    *   **普通怪 (🦇 Bat / 💀 Skeleton):** 基础敌人。
    *   **快速怪 (💨 Ghost / 🏃 Zombie):** 移动速度快。
    *   **肉盾怪 (🧱 Golem / 🐢 Turtle):** 生命值高。
    *   **远程怪 (🏹 Archer / 🧙 Mage):** 在远处发射投射物。
    *   **自爆怪 (💥 Bomb):** 死亡时爆炸，对玩家造成伤害。
    *   *(可能还有其他类型)*
*   **行为:** 近战追击，远程射击，特殊行为（自爆）。
*   **属性:** 基础属性 (`ENEMY_BASE_STATS` in `config.js`) + 类型乘数。
*   **掉落物:** 主要掉落经验宝石 💎，小概率掉落红心 ❤️ 或磁铁 🧲 (`spawnRandomPickup` in `game.js`)。

### Boss

*   **生成:** 固定时间间隔 (`BOSS_INTERVAL` in `config.js`) 生成，伴有警告。
*   **类型 (`BOSS_TYPES` in `constants.js`):**
    *   **Boss 可能的名称示例:** 巨型蝙蝠王, 骷髅领主, 巫妖, 恶魔 等。
    *   每个 Boss 类型有不同的 Emoji、基础属性乘数和攻击模式 (`attackPattern`)。
*   **属性:** 基础属性 (`BOSS_TYPES`) 结合出现次数（游戏时间）进行强化 (`BossEnemy` constructor in `enemy.js`)。
*   **行为 (`BossEnemy` in `enemy.js`):**
    *   **普通攻击模式 (`attackPattern`):**
        *   `melee`: 近战冲锋或攻击。
        *   `ranged`: 发射多个投射物（如环状散射）。
        *   `aoe`: 在自身周围或指定区域制造范围伤害。
        *   `summon`: 召唤普通小怪。
    *   **特殊能力 (周期性触发):**
        *   `performEarthquake`: 大范围地面震击。
        *   `performBarrage`: 发射密集弹幕。
        *   `performPoisonCloud`: 制造持续伤害的毒云区域。
        *   `performEliteSummon`: 召唤强化的精英小怪。
*   **掉落物:** 必定掉落一个宝箱 🎁 和大量经验宝石 (`BossEnemy.onDeath` in `enemy.js`)。

### 升级系统 (Level Up)

*   **经验获取:** 收集经验宝石 💎 (`ExperienceGem` in `pickups.js`)。
*   **等级提升:** 达到经验阈值 (`LEVEL_XP_REQUIREMENTS` in `config.js`)。
*   **升级选项:** 从随机选项中选择新武器/被动或升级现有项 (`getAvailableUpgrades` in `game.js`)。系统会尽量保证提供武器相关选项。

### 掉落物 (Pickups)

*   **经验宝石 (💎):** 主要升级资源。拾取增加经验。
*   **红心 (💖):** 拾取恢复生命值 (`Pickup` in `pickups.js`)。
*   **磁铁 (🧲):** 拾取将屏幕内所有经验宝石吸向玩家 (`Pickup` in `pickups.js`)。
*   **宝箱 (🎁):** 由 Boss 掉落 (`Chest` in `pickups.js`)。拾取后提供多个随机的升级选项或奖励（如直接获得一个随机武器/被动，或大量金币 - 如果未来加入金币系统）。

## 文件结构 (部分)

*   `index.html`: 游戏主页面。
*   `js/core/config.js`: 核心配置文件 (游戏尺寸、基础属性、经验曲线、Boss间隔等)。
*   `js/constants.js`: 定义游戏常量 (Emoji、敌人类型、Boss类型等)。
*   `js/core/cameraManager.js`: 摄像机管理。
*   `js/game.js`: 游戏主逻辑文件 (初始化、循环、更新、绘制、UI、对象管理、升级等)。
*   `js/entities/`: 游戏实体类 (玩家 `player.js`、敌人 `enemy.js`、掉落物 `pickups.js` 等)。
*   `js/weapons/`: 武器基类 (`weapon.js`)、投射物基类 (`projectile.js`) 及具体武器 (`basicWeapons.js`, `advancedWeapons.js`)。
*   `js/items/`: 被动道具基类 (`passiveItem.js`) 及具体被动 (`passiveItems.js`)。
*   `assets/`: 游戏资源 (图片等)。

## 如何修改

*   **基础数值/配置:** 查看 `js/core/config.js` 和 `js/constants.js`。
*   **游戏逻辑/核心循环/UI:** 查看 `js/game.js`。
*   **玩家/敌人行为/掉落物:** 查看 `js/entities/` 目录。
*   **武器/道具效果/升级:** 查看 `js/weapons/` 和 `js/items/` 目录。

## 待办事项与计划

*   **[计划] 增加更多武器/被动/进化:** 添加更多内容，例如实装进化所需的 `咒语生成器`、`复制器` 等被动，以及设计新的武器和进化路线（如激光武器、圣水等）。
*   **[计划] 增加敌人种类和行为:** 设计更多具有挑战性的敌人和 Boss 机制。
*   **[计划] 优化数值平衡:** 根据游戏体验调整武器/敌人/升级曲线等数值。
*   **[计划] 完善宝箱奖励:** 使宝箱能提供更丰富多样的奖励。
*   **[计划] 添加金币和局外成长系统:** 允许玩家在游戏结束后获得金币，用于解锁新角色、永久升级等。
*   **[计划] 优化性能:** 对于后期敌人数量极多的情况，进行性能分析和优化。
*   **[计划] 声音/音乐:** 添加音效和背景音乐。

## 游戏特点

- 🥷 控制忍者角色，使用WASD或方向键移动
- 💀 与各种敌人战斗，包括普通敌人和强大的Boss
- 🔪 解锁和升级多种武器和被动物品，部分武器可进化
- ✨ 收集经验宝石升级你的角色
- 🎁 打开宝箱获得随机奖励
- 🏆 尽可能长时间生存，挑战自己的记录

## 如何运行

1. 克隆或下载此仓库
2. 使用现代浏览器（如Chrome、Firefox、Edge等）打开`index.html`文件
3. 点击"开始游戏"按钮开始游戏

## 游戏控制

- **WASD** 或 **方向键**: 移动角色
- **P**: 暂停/继续游戏

## 技术细节

游戏使用纯JavaScript和HTML5 Canvas构建。
- 面向对象的游戏设计
- 使用对象池管理投射物和伤害数字
- 平滑的摄像机跟随
- 响应式设计
- 使用表情符号作为游戏精灵

## 许可证

MIT
